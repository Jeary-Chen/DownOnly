# DownOnly

**一款专为增加下行流量设计的工具。**

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://golang.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Linux-blue)](https://github.com/EchoPing07/DownOnly/releases)

### 📖 项目背景
在目前宽带运营环境下，许多 NAS 用户、PT 玩家或自建服务用户由于上传流量与下载流量比例和普通用户不同，容易被运营商的大数据算法误判为“商业 PCDN”行为，导致被限速、停网，强制要求签订保证书。

**DownOnly** 的核心思路是：通过产生真实但“无害”的下载流量，在不损耗硬件寿命的前提下，平衡你的宽带上下端比例，规避运营商的弱智判断算法。

我在这里并不推荐大家浪费公共网络资源，但是也不希望自身的合法合规行为被套上莫须有罪名。

---

### ✨ 功能特性

-   **⚡ 极简架构**：基于 Go 语言编写，编译后仅为一个单一的可执行文件（不到 15MB），内嵌所有 Web 资源，无任何外部依赖。
-   **🛡️ 零磁盘损耗**：采用 `io.Discard` 黑洞机制，下载数据直接在内存中丢弃，**0 磁盘写入**，保护 eMMC 闪存和 SSD 的硬件寿命。
-   **📈 专业审计**：
    -   **实时速率**：提供 Mbps 实时统计与秒级折线图呈现。
    -   **流量审计**：按日统计流量并以柱状图展示，自动归档月度总计。
    -   **历史回溯**：支持查看本年度内不同月份的历史流量数据。
-   **🧠 智能调度**：
    -   **时间窗口**：可自定义每日运行的时间段（如仅在深夜或高峰期运行）。
    -   **限额保护**：设置每日流量封顶值，达到限额后自动进入待机模式。
    -   **伪装 stealth**：内置随机化 User-Agent 和下载源轮换，模拟正常用户行为。
-   **🎨 现代 UI**：
    -   支持 **深色/浅色模式** 自由切换。
    -   响应式设计，适配手机、平板及电脑端访问。

---

### 🚀 快速启动

#### 1. 硬件要求
-   理论上支持 Linux (x86/ARM)、Windows、OpenWrt 等所有主流平台。
-   即使是 512MB 内存的迷你设备也能流畅运行，内存占用仅约 15MB。

#### 2. 本地编译
```bash
# 克隆仓库
git clone https://github.com/你的用户名/DownOnly.git
cd DownOnly

# 初始化模块
go mod init downonly

# 编译成单文件
go build -o downonly main.go

# 运行 (默认管理端口 8080)
./downonly
```

#### 3. 访问 Web 界面
在浏览器中输入：`http://你的设备IP:8080`

---

### 📂 目录结构说明
运行后，程序会在同级目录下创建 `data` 文件夹存储所有数据：
-   `config.json`: 存储你的速率、限额、地址列表等设置。
-   `stats.json`: 存储每日/每月的流量审计数据。
-   `logs.json`: 记录详细的下载和系统日志。

---

### 🛠️ 进阶配置
-   **下载源**：默认使用 Apple、Ubuntu、Cloudflare 等大厂的直链 CDN 地址，建议用户修改为运营商 CDN 地址。
-   **限速策略**：根据你的实际带宽上行情况，建议下载速度设为上行速的 1.5 - 2 倍。

---

### ⚠️ 免责声明
1.  本工具仅用于个人学习编程以及评估宽带网络状况。
2.  请在当地法律及运营商协议允许范围内使用。
3.  用户需自行承担因异常流量可能引发的运营商风险。

---

**觉得好用的话，点个 Star ⭐️ 是对我最大的鼓励！**
